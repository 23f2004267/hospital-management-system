{% extends "root.html" %}

{% block title %}Patient Dashboard{% endblock %}

{% block content %}

<h2>Welcome {{ session.name }}</h2>


<!-- ------------ Departments Section ---------------- -->
<div style="border: 2px solid black; padding: 15px; border-radius: 10px; margin-bottom: 25px;">
    <h3>Departments</h3>

    {% for dept in departments %}
        <div style="margin-bottom:10px; padding: 8px; border:1px solid gray; border-radius:8px;">
            <strong>{{ dept.name }}</strong>
            <a href="/department/{{ dept.id }}" 
               style="float:right; border:1px solid blue; padding:4px 10px; border-radius:5px;">
               view details
            </a>
        </div>
    {% endfor %}
</div>

<!-- ------------ Appointments Section ---------------- -->
<div style="border: 2px solid black; padding: 15px; border-radius: 10px;">
    <h3>Upcoming Appointments</h3>

    {% if appointments %}
        <table border="1" width="100%" cellpadding="8">
            <tr>
                <th>Sr No.</th>
                <th>Doctor Name</th>
                <th>Department</th>
                <th>Date</th>
                <th>Time</th>
                <th>Action</th>
            </tr>

            {% for appt in appointments %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>{{ appt.doctor_name }}</td>
                <td>{{ appt.department }}</td>
                <td>{{ appt.date }}</td>
                <td>{{ appt.time }}</td>
                <td>
                    <a href="/cancel/{{ appt.id }}" 
                       style="color:red; border:1px solid red; padding:3px 8px; border-radius:5px;">
                        cancel
                    </a>
                </td>
            </tr>
            {% endfor %}
        </table>

    {% else %}
        <p>No upcoming appointments.</p>
    {% endif %}
</div>

{% endblock %}
